---
layout: page
title: Introduction to CartoDB Workshop for Data Journalists
category: introductory
date: 2016-04-05
author: 'Ramiro Aznar'
length: 1h 30'
---

* Speaker: Ramiro Aznar 路 ramiroaznar@cartodb.com 路 [@ramiroaznar](http://twitter.com/ramiroaznar)
* 6th May 2016
* [JPD16](http://jpd16.okfn.es/)路 IV Jornadas de Periodismo de Datos 路 Madrid

# Introduction to CartoDB Workshop for Data Journalists

## 1. Importing datasets

### 1. 1. Supported Geospatial Data Files
CartoDB supports the following geospatial data formats to upload vector data:

* **`Shapefile`**: a shapefile has to be formed, at least, by a `.shp` file, a `.shx` file, a `.prj` file and a `.dbf` file. These files contain the geometry data, the indexes, the projection information and the attributes, respectively. Shapefiles must be imported as a single compressed file, in the `.zip` or `.gz` format. *Limitations*:
	* The column name cannot exceed 10 characters.
	* Date columns only support the date, not the time.
	* It is recommended to upload Shapefiles in the EPSG 4326 projection.
	* Ensure you save your Shapefile with encoding UTF-8, prior importing.

* **`KML`**: the KML format is a XML based format which adds to it a geographical meaning by being able to define features such as points, polygons or lines in the EPSG 4326 projection.

* **`KMZ`**: a Keyhole Markup language Zipped (KMZ) file corresponds to a compressed file, including a KML file and zero, or more, supporting files (images, icons, overlays or other elements referenced in the KML file).

* **`GeoJSON`**: the GeoJSON format is an extension of the JavaScript Object Notation (JSON) that encodes geographical features and their metadata. More detailed information about GeoJSON format [here](http://geojson.org/geojson-spec.html).

* **`CSV`**: Comma-Separated Values (or TSV, Tab-Separated Values) files can be imported to CartoDB. *Limitations*:
	* The first line of the CSV file must contain the name of the columns (headers).
	* The rest of the lines of the CSV file must follow the schema defined by the header column, in terms of number of columns.
	* It is recommended that string values are double-quoted (`"example"`).
	* If the data itself contains quotes, the values must be double-quoted and the internal quotes must be escaped (`"Null Island", "{""type"": ""Point"", ""coordinates"": [0,0]}"`).
	* CSV lines must be terminated with CR/LF, or LF [line terminators](https://en.wikipedia.org/wiki/Newline). 

* **`Spreedsheets`**: spreadsheets such as Excel spreadsheets, OpenDocument spreadsheets or Google Drive spreadsheets are supported by CartoDB. *Limitations*:
	*The first row must contain the names for each column.
	*Merged cells are not supported.
	*Graphs, charts, or other kind of elements are not supported.

* **`GPX`**: the GPX (GPS Exchange Format) files are XML documents that contain waypoints, tracks and/or routes. When importing a GPX file, CartoDB will generate different datasets for points, tracks and waypoints. The resulting names of these datasets will be a combination of the GPX name and their type:` _track_points`, `_tracks`, and `_waypoints`, respectively.

* **`OSM`**: CartoDB supports importing Open Street Map dumps (`.osm` files). These files are XML documents that have a `osm` parent element that can contain blocks of nodes, ways, or relations representing points, lines or polygons. CartoDB will automatically separate OSM dumps into different tables, depending on the geometry. Therefore, importing a single OSM file can lead to more than one resulting dataset.

*Importing **different geometry types** in the same layer or in a FeatureCollection element (GeoJSON) is not supported. More detailed information [here](http://docs.cartodb.com/cartodb-platform/import-api/geospatial-data-formats/#supported-geospatial-data-formats).

### 1. 2. Common importing errors
* **Dataset too large**:
	* File size limit: 150 Mb (free).
	* Import row limit: 500,000 rows (free).
	* *Solution*: split your dataset into smaller ones, import them into CartoDB and merge them.

* **Malformed CSV**:
	* *Solution*: check termination lines, remove header...

* **Encoding**:
	* *Solution*: `Save with Encoding` > `UTF-8 with BOM` in [Sublime Text](https://www.sublimetext.com/).

* **Shapefile missing files**:
	* Missing any of the following files within the compressed file will produce an importing error:
		* `.shp`: contains the geometry. REQUIRED.
		* `.shx`: contains the shape index. REQUIRED.
		* `.prj`: contains the projection. REQUIRED.
		* `.dbf`: contains the attributes. REQUIRED.
	* Other auxiliary files such as `.sbn`, `.sbx` or `.shp.xml` are not REQUIRED.
	* *Solution*: make sure to add all required files.

* **Duplicated id fields**:
	* *Solution*: check your dataset, remove or rename fields containing the `id` keyword.

* **Format not supported**:
	* URLs are not supported by CartoDB. 
	* *Solution*: check for missing url parameters, download the dataset into your local machine, import it into CartoDB.

* **MAYUS extensions not supported**:
	* `example.CSV`is not supported by CartoDB.
	* *Solution*: rename the file.

Other importing errors and their codes can be found [here](http://docs.cartodb.com/cartodb-platform/import-api/import-errors/). 


## 2. Getting your data ready

### 2. 1. Geocoding

If you have a column with longitude coordinates and another with latitude coordinates, CartoDB will automatically detect and covert values into `the_geom`*. If this is not the case, CartoDB can help you by turning the named places into best guess of latitude-longitude coordinates:

* **By Lon/Lat Columns**.
* **By City Names**.
* **By Admin. Regions**.
* **By Postal Codes**.
* **By IP Addresses**.
* **By Street Addresses**.

Know more about geocoding in CartoDB:

* In [**this tutorial**](http://docs.cartodb.com/tutorials/how_to_georeference/).
* In [**our Location Data Services website**](https://cartodb.com/location-data-services/geocoding/).
* In our [**documentation**](http://docs.cartodb.com/cartodb-platform/dataservices-api/geocoding-functions/).

&#42;About geometry columns:

* **`the_geom`** EPSG:4326. Unprojected coordinates in **decimal degrees** (Lon/Lat). WGS84 Spheroid.
* **`the_geom_webmercator`** EPSG:3857. UTM projected coordinates in **meters**. This is a conventional Coordinate Reference System, widely accepted as a 'de facto' standard in webmapping.

### 2. 2. Datasets

* `populated_places`: City and town points.
* `world_borders`: world countries borders.

### 2. 3. Selecting

* Selecting **all the columns**:
* Selecting **some columns**:
* Selecting **distinc values**:
* Selecting **aggregated values**:
* **Ordering results**:
* **Limiting results**:

### 2. 4. Filtering

* Filtering **numeric fields**:
* Filtering **character fields**:
* Filtering a **range**:
* **Combining**:

## 3. Making a map

### 2. 1. Wizard

* **Simple Map**:
* **Cluster Map**:
* **Choropleth Map**:
* **Category Map**:
* **Bubble Map**:
* **Torque Map**:
* **Heatmap Map**:
* **Torque Cat Map**:
* **Intensity Map**:
* **Density Map**:

### 2. 2. Styles

### 2. 3. Other elements

* **Legend**:
* **Infowindows and tooltip**:
* **Title, text and images**:

### 2. 4. Share your map!

* **Get the link**:
* **Embed it**:
* **CartoDB.js**:

